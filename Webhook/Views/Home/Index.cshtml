@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1>Dados Recebidos do Webhook:</h1>
    <ul id="mensagens"></ul>
</div>


@section Scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder().withUrl("/webhookhub").build();

        connection.on("ReceberWebhook", (data) => {
            console.log("Dados: ", data);
            const li = document.createElement("li");
            li.textContent = data;
            document.getElementById("mensagens").appendChild(li);
        });

        connection.start().catch(err => console.error(err.toString()));
    </script>
}